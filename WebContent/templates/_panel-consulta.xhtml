<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core">

<ui:composition template="/templates/_headerFooter.xhtml">
	<ui:define name="corpo">
		<h:form id="formPainel">
			<h:outputStylesheet value="panelTitulo" id="aexfae"/>
			<p:panel header="#{tituloPainel}" styleClass="panelConsulta" id="hgn">
				<f:facet name="actions" >
					<h:commandLink id="cmlHelp"
						styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default" >
						<h:outputText styleClass="ui-icon ui-icon-help" id="tyb"/>
					</h:commandLink>
					<c:if test="#{help!=null}">
						<p:tooltip for="cmlHelp" value="#{help}" id="jkbb"/>
					</c:if>
				</f:facet>
				<div id="consulta_botoes">
					<p:commandButton id="cbIncluir" value="" update=":formIncluir:dlgIncluir"
						styleClass="botaoConsulta" actionListener="#{bean.carregarPopUpIncluir}"
						style="background-image: url('resources/images/incluir.gif') !important;"
						oncomplete="PF('dlgIncluir').show();" >
						<f:setPropertyActionListener target="#{bean.tipo}" value="incluir" />
					</p:commandButton>
					<p:tooltip for="cbIncluir" value="Incluir" id="yilbuyk"/>
					<p:commandButton id="cbAlterar" update=":formIncluir:dlgIncluir"
						styleClass="botaoConsulta" actionListener="#{bean.carregarPopUpAlterar}"
						style="background-image: url('resources/images/alterar.gif') !important;"
						oncomplete="PF('dlgIncluir').show();" value="">
						<f:setPropertyActionListener target="#{bean.tipo}" value="alterar" />
						<f:setPropertyActionListener target="#{bean.selected}"
							value="#{selectedList.get(0)}" />
					</p:commandButton>
					<p:tooltip for="cbAlterar" value="Alterar" id="buyuyb"/>
					<p:commandButton id="cmbExcluir" value="" process="dataTable"
						update=":formDlgExcluir:dlgExcluir,:formDlgExcluir:dlgExcluirConfirm"
						oncomplete="PF('dlgExcluir').show()" styleClass="botaoConsulta"
						style="background-image: url('resources/images/excluir.gif') !important;" rendered="#{loginBean.moduloAdministrativo}"/>
					<p:tooltip for="cmbExcluir" value="Excluir" id="jkbuyk"/>

					<h:commandButton id="cbImprimir" actionListener="#{bean.print()}"
					style="background-image: url('resources/images/imprimir.gif') !important;"
							styleClass="botaoImprimir" >
					</h:commandButton>

					<p:tooltip for="cbImprimir" value="Imprimir" id="ukyrvbu"/>
				</div>
				<br />
				<br />
				<p:dataTable selection="#{bean.selectedList}" rowKey="#{list.id}"
					value="#{bean.listTable}" var="list" id="dataTable"
					emptyMessage="Nenhum registro encontrado." styleClass="dtConsulta"
					filteredValue="#{bean.filteredList}">
					<p:column selectionMode="multiple" styleClass="c_select"
						style="width:16px;text-align:center" id="ukyvu"/>
					<ui:insert name="tableColumns" />
				</p:dataTable>
			</p:panel>
			</h:form>
			<h:form id="formDlgExcluir">
			<p:confirmDialog
				message="#{bean.selectedList.isEmpty()?'Escolha um item para excluir':bean.avisoPreExcluir}"
				severity="alert" widgetVar="dlgExcluir" dynamic="true"
				id="dlgExcluir" styleClass="popUpExcluir">
				<br />
				<c:if test="#{!bean.selectedList.isEmpty()}">
					<ui:repeat var="c" value="#{bean.selectedList}">
						<p:outputLabel value="#{c}" />
						<br />
						<br />
					</ui:repeat>
					<p:commandButton value="Não" onclick="PF('dlgExcluir').hide();" id="jtvio"/>
					<p:commandButton value="Sim"
						onclick="PF('dlgExcluirConf').show(); PF('dlgExcluir').hide(); return false; " id="kuyv"/>
				</c:if>
			</p:confirmDialog>
			<p:confirmDialog id="dlgExcluirConfirm" styleClass="popUpExcluir"
				message="#{bean.avisoExcluir}" severity="alert"
				widgetVar="dlgExcluirConf">
				<br />
				<ui:repeat var="c" value="#{bean.selectedList}">
					<p:outputLabel value="#{c}" />
					<br />
					<br />
				</ui:repeat>
				<p:commandButton value="Não" onclick="PF('dlgExcluirConf').hide();" id="kyutb"/>
				<p:commandButton value="Sim"
					oncomplete="PF('dlgExcluirConf').hide();"
					actionListener="#{bean.removeSelectedList}" update=":formPainel:dataTable" id="jkuytv"/>
			</p:confirmDialog>
			</h:form>			
			<h:form id="formIncluir" enctype="#{bean.enctype}">
			<p:dialog header="#{tituloPainel} | #{bean.headerInclude}"
				styleClass="#{tituloPainel}" widgetVar="dlgIncluir" id="dlgIncluir"
				modal="true">
				<p:ajax event="close" listener="#{bean.limpar}" update=":formPainel:dataTable" />
				<c:if test="#{!bean.updateEmptySelection}">
					<ui:insert name="popup-incluir" />
				</c:if>
				<c:if test="#{bean.updateEmptySelection}">
					Escolha um item para alterar.
				</c:if>
				<br />
			</p:dialog>
			</h:form>		
	</ui:define>
</ui:composition>
</html>