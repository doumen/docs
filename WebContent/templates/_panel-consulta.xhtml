<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core">

<ui:composition template="/templates/_headerFooter.xhtml">
	<ui:define name="corpo">
		<h:form id="formPainel">
			<h:outputStylesheet value="panelTitulo" />
			<p:panel header="#{tituloPainel}" styleClass="panelConsulta">
				<f:facet name="actions">
					<h:commandLink id="cmlHelp"
						styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default">
						<h:outputText styleClass="ui-icon ui-icon-help" />
					</h:commandLink>
					<c:if test="#{help!=null}">
						<p:tooltip for="cmlHelp" value="#{help}" />
					</c:if>
				</f:facet>
				<div style="float: right;">
					<p:commandButton id="cbIncluir" value="" update="dlgIncluir"
						styleClass="botaoConsulta"
						style="background-image: url('resources/images/incluir.gif') !important;"
						oncomplete="PF('dlgIncluir').show();">
						<f:setPropertyActionListener target="#{bean.tipo}" value="incluir" />
					</p:commandButton>
					<p:tooltip for="cbIncluir" value="Incluir" />
					<p:commandButton id="cbAlterar" update="dlgIncluir"
						styleClass="botaoConsulta"
						style="background-image: url('resources/images/alterar.gif') !important;"
						oncomplete="PF('dlgIncluir').show();" value="">
						<f:setPropertyActionListener target="#{bean.tipo}" value="alterar" />
					</p:commandButton>
					<p:tooltip for="cbAlterar" value="Alterar" />
					<p:commandButton id="cmbExcluir" value="" process="dataTable"
						update="dlgExcluir,dlgExcluirConfirm"
						oncomplete="PF('dlgExcluir').show()" styleClass="botaoConsulta"
						style="background-image: url('resources/images/excluir.gif') !important;" />
					<p:tooltip for="cmbExcluir" value="Excluir" />
					<p:commandButton id="cbImprimir" value="" process="dataTable"
						styleClass="botaoConsulta"
						style="background-image: url('resources/images/imprimir.gif') !important;">
						<p:printer target="dataTable" />
					</p:commandButton>
					<p:tooltip for="cbImprimir" value="Imprimir" />
				</div>
				<br />
				<br />
				<p:dataTable selection="#{bean.selectedList}" rowKey="#{list.id}"
					value="#{bean.listTable}" var="list" id="dataTable">
					<p:column selectionMode="multiple"
						style="width:16px;text-align:center" />
					<ui:insert name="tableColumns" />
				</p:dataTable>
			</p:panel>
			<p:confirmDialog message="#{bean.avisoPreExcluir}" severity="alert"
				widgetVar="dlgExcluir" dynamic="true" id="dlgExcluir" styleClass="popUpExcluir">
				<br />
				<ui:repeat var="c" value="#{bean.selectedList}">
					<p:outputLabel value="#{c}" />
					<br /> <br />
				</ui:repeat>
				<p:commandButton value="Não" onclick="PF('dlgExcluir').hide();" />
				<p:commandButton value="Sim"
					onclick="PF('dlgExcluirConf').show(); PF('dlgExcluir').hide(); return false; " />
			</p:confirmDialog>
			<p:confirmDialog id="dlgExcluirConfirm" styleClass="popUpExcluir"
				message="#{bean.avisoExcluir}" severity="alert"
				widgetVar="dlgExcluirConf">
				<br />
				<ui:repeat var="c" value="#{bean.selectedList}">
					<p:outputLabel value="#{c}" />
					<br /><br />
				</ui:repeat>
				<p:commandButton value="Não" onclick="PF('dlgExcluirConf').hide();" />
				<p:commandButton value="Sim"
					onclick="PF('dlgExcluirConf').hide();PF('dlgExcluirExcluir').show()"
					action="#{bean.removeSelectedList}" update="@all" />
			</p:confirmDialog>
			<p:dialog header="Incluir" widgetVar="dlgIncluir" modal="true" styleClass="#{tituloPainel}">
				<ui:insert name="dlgForm" />
				<p:commandButton value="incluir" onclick="dlgIncluir.hide();"
					style="float: center;" action="#{bean.incluir}" update="@all" />
			</p:dialog>
			<p:dialog header="#{tituloPainel} | #{bean.headerInclude}" styleClass="#{tituloPainel}"
				widgetVar="dlgIncluir" id="dlgIncluir"
				modal="true">
				<p:ajax event="close" listener="#{bean.limpar}" update="@all" />
				<c:if test="#{!bean.updateEmptySelection}">
					<ui:insert name="popup-incluir"></ui:insert>
				</c:if>
				<c:if test="#{bean.updateEmptySelection}">
					Escolha um item para alterar.
				</c:if>
				<br/>
				<div id="botaoFechar">
				<p:commandButton value="Fechar" onclick="PF('dlgIncluir').hide();" rendered="false" />
				</div>
			</p:dialog>
		</h:form>
	</ui:define>
</ui:composition>
</html>
